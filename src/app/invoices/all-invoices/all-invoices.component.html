<p class="mat-h4">All Invoices</p>

<br>

<div fxLayout="row" fxLayoutAlign="space-between start">

		<p class="mat-title">{{total | currency: 'GBP'}} <span class="mat-small text-muted">(Last 365 days)</span></p>

		<button mat-raised-button routerLink="/invoices/new">New Invoice</button>

</div>

<br>

<mat-progress-bar *ngIf="!dataSource.data.length" mode="indeterminate"></mat-progress-bar>

<table *ngIf="dataSource" mat-table [dataSource]="dataSource" matSort matSortActive="id" matSortDirection="asc" class="mat-elevation-z1" width="100%">
	
	<ng-container matColumnDef="id">

		<th mat-header-cell *matHeaderCellDef mat-sort-header>ID</th>

		<td mat-cell *matCellDef="let invoice">{{invoice.id}}</td>

	</ng-container>
	
	<ng-container matColumnDef="number">
		
		<th mat-header-cell *matHeaderCellDef mat-sort-header>Number</th>
		
		<td mat-cell *matCellDef="let invoice">{{invoice.number}}</td>
		
	</ng-container>
	
	<ng-container matColumnDef="reference">
		
		<th mat-header-cell *matHeaderCellDef mat-sort-header>Reference</th>
		
		<td mat-cell *matCellDef="let invoice">{{invoice.reference}}</td>
		
	</ng-container>
	
	<ng-container matColumnDef="date">
		
		<th mat-header-cell *matHeaderCellDef mat-sort-header>Date</th>
		
		<td mat-cell *matCellDef="let invoice">{{invoice.date | date: 'dd/MM/yyyy'}}</td>
		
	</ng-container>
	
	<ng-container matColumnDef="total">
		
		<th mat-header-cell *matHeaderCellDef mat-sort-header>Total</th>
		
		<td mat-cell *matCellDef="let invoice">{{invoice.total | currency: 'GBP'}}</td>
		
	</ng-container>
	
	<ng-container matColumnDef="status">
		
		<th mat-header-cell *matHeaderCellDef mat-sort-header>Status</th>
		
		<td mat-cell *matCellDef="let invoice" class="status" [ngClass]="{'open': invoice.status === 'open', 'overdue': invoice.status === 'overdue', 'paid': invoice.status === 'paid'}">{{invoice.status | titlecase}}</td>
		
	</ng-container>

	<tr mat-header-row *matHeaderRowDef="tableColumns"></tr>
	
    <tr mat-row *matRowDef="let row; columns: tableColumns" (click)="viewInvoice(row)">

</table>

<mat-paginator *ngIf="dataSource" [length]="dataSource.length" [pageSize]="25" [pageSizeOptions]="[5, 10, 25, 50]" class="mat-elevation-z1"></mat-paginator>